# TODO: make 'gp' - go previous to pwd (where open)
[manager]
prepend_keymap = [
    {on = [ "g", "r" ], run = '''shell 'ya emit cd "$(git rev-parse --show-toplevel)"'''', desc = "Return git root"},
    {on = "!", run = 'shell "$SHELL" --block', desc = "Open shell here"},
    # TODO: 
    # 1. Add open current directory via <a-o>
    # 2. Add select reverse <s-space>

    #Smart-paste
    {on = "p", run = 'plugin smart-paste', desc = "Paste into the hovered directory or CWD"},
    # Max preview
    {on = "T", run = "plugin max-preview", desc = "Maximize or restore preview"},
    # Mount
    {on = "M", run = "plugin mount", desc = "Mount plugin"},
    
    # Chmod
    {on = [ "c", "m" ], run = "plugin chmod", desc = "Chmod on selected files"},
    # Bypass
    {on = "<a-l>", run = "plugin bypass", desc = "Bypass enter dirs while the only file - dir inside"},
    {on = "<a-h>", run = "plugin bypass --args=reverse", desc = "Bypass leave dirs while the only file - dir outside"},
    # First non-dir file plug
    {on = ["g", "j"], run = "plugin first-non-directory", desc = "Jump to the first file"},
    #Custom shell
    {on = ":", run = 'plugin custom-shell --args="auto --interactive"', desc = "Jump to the first file"},
    
    # Bookmarks
    # TODO: add relative path marks (starts with ~/)
    {on = "m", run = "plugin bookmarks --args=save", desc = "Save current position as a bookmark"},
    {on = "'", run = "plugin bookmarks --args=jump", desc = "Jump to a bookmark"},
    {on = ["b", "d"], run = "plugin bookmarks --args=delete", desc = "Delete a bookmark"},
    {on = ["b", "D"], run = "plugin bookmarks --args=delete_all", desc = "Delete all bookmarks"},

    # Relative motions
    {on = "1", run = "plugin relative-motions --args=1", desc = "Move in relative steps"},
    {on = "2", run = "plugin relative-motions --args=2", desc = "Move in relative steps"},
    {on = "3", run = "plugin relative-motions --args=3", desc = "Move in relative steps"},
    {on = "4", run = "plugin relative-motions --args=4", desc = "Move in relative steps"},
    {on = "5", run = "plugin relative-motions --args=5", desc = "Move in relative steps"},
    {on = "6", run = "plugin relative-motions --args=6", desc = "Move in relative steps"},
    {on = "7", run = "plugin relative-motions --args=7", desc = "Move in relative steps"},
    {on = "8", run = "plugin relative-motions --args=8", desc = "Move in relative steps"},
    {on = "9", run = "plugin relative-motions --args=9", desc = "Move in relative steps"},
    # Switch tab
    {on = "<a-1>", run = "tab_switch 0", desc = "switch tab"},
    {on = "<a-2>", run = "tab_switch 1", desc = "switch tab"},
    {on = "<a-3>", run = "tab_switch 2", desc = "switch tab"},
    {on = "<a-4>", run = "tab_switch 3", desc = "switch tab"},
    {on = "<a-5>", run = "tab_switch 4", desc = "switch tab"},
    {on = "<a-6>", run = "tab_switch 5", desc = "switch tab"},
    {on = "<a-7>", run = "tab_switch 6", desc = "switch tab"},
    {on = "<a-8>", run = "tab_switch 7", desc = "switch tab"},
    {on = "<a-9>", run = "tab_switch 8", desc = "switch tab"},
]
